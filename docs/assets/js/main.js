"use strict";let searchShows=[],favoritesShows=[];const paintCardsShow=()=>{for(let e=0;e<searchShows.length;e++){const t=searchShows[e],o=t.show.name;let s="";s=null===t.show.image?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":t.show.image.medium;const a=document.createElement("li");a.classList.add("li__card"),a.setAttribute("id",t.show.id);const i=document.createElement("img");i.setAttribute("src",s),i.setAttribute("alt","cartel de la serie");const r=document.createElement("h2"),n=document.createTextNode(o);r.appendChild(n),favoritesShows.find(e=>{e.show.id===t.show.id&&a.classList.add("showList--favorite")}),document.querySelector(".js-showList").appendChild(a),a.appendChild(i),a.appendChild(r)}},selectFavoriteShow=e=>{e.preventDefault();const t=parseInt(e.currentTarget.id);let o,s=-1;for(let e=0;e<favoritesShows.length;e++)favoritesShows[e].show.id===t&&(s=e);for(const e of searchShows)e.show.id===t&&(o=e);-1===s?favoritesShows.push(o):favoritesShows.splice(s,1),localStorage.setItem("resultFav",JSON.stringify(favoritesShows)),deleteShows(),paintCardsShow(),listenFavoriteShow(),paintListOfFavorites()},listenFavoriteShow=()=>{const e=document.querySelectorAll("li");for(const t of e)t.addEventListener("click",selectFavoriteShow)},iconListen=()=>{const e=document.querySelectorAll(".delete--icon");for(const t of e)t.addEventListener("click",selectFavoriteShow)},deleteShows=()=>{const e=document.querySelectorAll("li");for(const t of e)t.remove()},paintListOfFavorites=()=>{for(const e of favoritesShows){let t="";t=null===e.show.image?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":e.show.image.medium;const o=e.show.name,s=e.show.id,a=document.createElement("li");a.classList.add("item__favorite");const i=document.createElement("i");i.setAttribute("id",s),i.classList.add("delete--icon"),i.classList.add("fas"),i.classList.add("fa-times-circle");const r=document.createElement("img");r.classList.add("img__favorite"),r.setAttribute("src",t),r.setAttribute("alt","Imagen de la serie");const n=document.createElement("h3"),l=document.createTextNode(o);n.appendChild(l),a.appendChild(r),a.appendChild(n),a.appendChild(i),document.querySelector(".js-showListFavorties").appendChild(a)}iconListen()},handledeleteFavorites=e=>{e.preventDefault(),favoritesShows=[],localStorage.setItem("resultFav",JSON.stringify(favoritesShows)),deleteShows(),paintCardsShow(),listenFavoriteShow()},buttonDeleteEl=document.querySelector(".js-button--delete");buttonDeleteEl.addEventListener("click",handledeleteFavorites);const getShowInformation=e=>{e.preventDefault();const t=document.querySelector(".js-userInput").value;fetch(`http://api.tvmaze.com/search/shows?q=${t}`).then(e=>e.json()).then(e=>{searchShows=e,deleteShows(),paintCardsShow(),listenFavoriteShow(),paintListOfFavorites()}).catch(e=>console.log(`Hay un error, ${e}`))},buttonEl=document.querySelector(".js-button");buttonEl.addEventListener("click",getShowInformation);const getDataFromLS=()=>{let e=JSON.parse(localStorage.getItem("resultFav"));null!==e&&(favoritesShows=e,deleteShows(),paintCardsShow(),listenFavoriteShow(),paintListOfFavorites())};getDataFromLS();